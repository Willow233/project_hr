(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f92f012"],{"060e":function(e,t,a){},1385:function(e,t,a){"use strict";a("3249")},2506:function(e,t,a){"use strict";a.d(t,"d",(function(){return s})),a.d(t,"e",(function(){return o})),a.d(t,"f",(function(){return i})),a.d(t,"g",(function(){return l})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return p}));a("99af");var r=a("b775");function s(e){return Object(r["a"])({url:"/user/process/instance/".concat(e.page,"/").concat(e.pageSize),method:"put",data:e})}function o(e){return Object(r["a"])({url:"/user/process/instance/".concat(e)})}function i(e){return Object(r["a"])({url:"/user/process/definition",params:e})}function l(e){return Object(r["a"])({url:"/user/process/startProcess",data:e,method:"post"})}function n(e){return Object(r["a"])({url:"/user/approvals/".concat(e.id,"/reject"),method:"put",data:e})}function c(e){return Object(r["a"])({url:"/user/approvals/".concat(e),method:"delete"})}function p(e){return Object(r["a"])({url:"/user/process/instance/commit",method:"put",data:e})}},3249:function(e,t,a){},"3be6":function(e,t,a){"use strict";a("060e")},"5d56":function(e,t,a){},"712a":function(e,t,a){"use strict";a("a5f2")},"76d3":function(e,t,a){"use strict";a("5d56")},"944f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-container"},[a("div",{staticClass:"app-container"},[a("page-tools",{attrs:{"show-before":!0},scopedSlots:e._u([{key:"before",fn:function(){return[e._v(" 共"+e._s(e.total)+"条审批记录 ")]},proxy:!0}])}),a("el-card",[a("div",{staticClass:"usersApprovalsContainer"},[a("div",{staticClass:"approvalsTop"},[a("el-tabs",{on:{"tab-click":e.tabSwitch},model:{value:e.tagName,callback:function(t){e.tagName=t},expression:"tagName"}},[a("el-tab-pane",{attrs:{label:"全部",name:"copy"}}),a("el-tab-pane",{attrs:{label:"我发起的",name:"launch"}}),a("el-tab-pane",{attrs:{label:"待审批",name:"approvals"}})],1)],1),a("div",{staticClass:"approvalsContent"},[a("div",{staticClass:"topTitle"},[a("div",[a("span",[e._v("审批类型：")]),a("el-radio-group",{staticStyle:{margin:"5px 0"},model:{value:e.approvalsTypes,callback:function(t){e.approvalsTypes=t},expression:"approvalsTypes"}},e._l(e.approvalsType,(function(t){return a("el-radio",{key:t.deploymentId,attrs:{label:t.key,value:t.key},nativeOn:{click:function(a){return a.preventDefault(),e.checkRadio(t.key)}}},[e._v(e._s(t.name))])})),1)],1),"approvals"!=e.tagName?a("div",[a("span",[e._v("审批状态：")]),a("el-checkbox-group",{model:{value:e.approvalsStates,callback:function(t){e.approvalsStates=t},expression:"approvalsStates"}},e._l(e.approvalsState,(function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id,value:t.id},on:{change:e.changeSelectParams}},[e._v(e._s(t.value))])})),1)],1):e._e()]),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"default-sort":{order:"descending",prop:"procApplyTime"},border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),a("el-table-column",{attrs:{prop:"processName",label:"审批类型",width:"200",align:"center"}}),"launch"!==e.tagName?a("el-table-column",{attrs:{prop:"username",label:"申请人",align:"center"}}):e._e(),"approvals"!==e.tagName?a("el-table-column",{attrs:{prop:"procCurrNodeUserName",label:"当前审批人",width:"300",align:"center"}}):e._e(),a("el-table-column",{attrs:{label:"申请时间",sortable:"",prop:"procApplyTime",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(t.row.procApplyTime)))])]}}])}),a("el-table-column",{attrs:{label:"审批状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.processState?a("span",{staticClass:"rovalsState"},[a("em",{staticClass:"sub"}),e._v("已提交 ")]):e._e(),"1"===t.row.processState?a("span",{staticClass:"rovalsState"},[a("em",{staticClass:"stay"}),e._v("审批中 ")]):e._e(),"2"===t.row.processState?a("span",{staticClass:"rovalsState"},[a("em",{staticClass:"adopt"}),e._v("审批通过 ")]):e._e(),"3"===t.row.processState?a("span",{staticClass:"rovalsState"},[a("em",{staticClass:"reject"}),e._v("审批不通过 ")]):e._e(),"4"===t.row.processState?a("span",{staticClass:"rovalsState"},[a("em",{staticClass:"revoke"}),e._v("撤销 ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"launch"==e.tagName&&"1"===t.row.processState,expression:"(tagName == 'launch')&&(scope.row.processState==='1')"}],attrs:{size:"mini",type:"text"},on:{click:function(a){return e.clickPass("4",t.row.processId)}}},[e._v("撤销")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:("copy"==e.tagName||"approvals"==e.tagName)&&"1"===t.row.processState,expression:"(tagName == 'copy' || tagName == 'approvals')&&(scope.row.processState==='1')"}],attrs:{size:"mini",type:"text"},on:{click:function(a){return e.clickPass("2",t.row.processId)}}},[e._v("通过")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:("copy"==e.tagName||"approvals"==e.tagName)&&"1"===t.row.processState,expression:"(tagName == 'copy' || tagName == 'approvals')&&(scope.row.processState==='1')"}],attrs:{size:"mini",type:"text"},on:{click:function(a){return e.clickPass("3",t.row.processId)}}},[e._v("驳回")]),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.clickDetail(t.row.processId,t.row.processName)}}},[e._v("查看")])]}}])})],1),a("el-row",{staticStyle:{height:"60px"},attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-pagination",{attrs:{total:e.total,"current-page":e.pagination.page,"page-size":e.pagination.pageSize,layout:"prev, pager, next"},on:{"current-change":e.handleCurrentChange}})],1)],1)]),a("el-dialog",{attrs:{title:e.topLabel,visible:e.centerDialogVisible,width:"600px",top:"8vh",left:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},["quit"==e.seeState?a("Quit",{ref:"quit",attrs:{"selected-id":e.selectedId,"tab-lab":e.tagName},on:{closeDialog:e.closeDialog}}):e._e(),"leave"==e.seeState?a("Leave",{ref:"leave",attrs:{"selected-id":e.selectedId,"tab-lab":e.tagName},on:{closeDialog:e.closeDialog}}):e._e(),"overtime"==e.seeState?a("Overtime",{ref:"overtime",attrs:{"selected-id":e.selectedId,"tab-lab":e.tagName},on:{closeDialog:e.closeDialog}}):e._e()],1),a("el-dialog",{attrs:{title:"备注",visible:e.adoptVisible,width:"30%",top:"8vh","before-close":e.handleClose},on:{"update:visible":function(t){e.adoptVisible=t}}},[a("span",[a("el-input",{attrs:{type:"textarea"},model:{value:e.formData.handleOpinion,callback:function(t){e.$set(e.formData,"handleOpinion",t)},expression:"formData.handleOpinion"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.adoptVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleProcess}},[e._v("确认")])],1)])],1)])],1)])},s=[],o=a("c7eb"),i=a("1da1"),l=a("5530"),n=(a("a15b"),a("2506")),c={approvalType:[{id:"1",value:"转正"},{id:"2",value:"调岗"},{id:"3",value:"离职"},{id:"4",value:"员工信息审核"},{id:"5",value:"调薪"},{id:"6",value:"工资审核"},{id:"7",value:"请假"},{id:"8",value:"销假"},{id:"9",value:"外出"},{id:"10",value:"销外出"},{id:"11",value:"出差"},{id:"12",value:"销出差"},{id:"13",value:"外勤打卡"},{id:"14",value:"补打卡"},{id:"15",value:"加班"},{id:"16",value:"招聘"},{id:"17",value:"录用"}],approvalState:[{id:"1",value:"审批中"},{id:"2",value:"审批通过"},{id:"3",value:"审批不通过"},{id:"4",value:"撤销"}]},p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"AdjustThePost"},[a("div",{staticClass:"infoBox"},[a("div",{staticClass:"info"},[a("p",[a("span",{staticClass:"name"},[e._v("姓名："+e._s(e.ruleForm.username))])]),a("p",[a("span",[e._v("部门：")]),e._v(" "+e._s(e.ruleForm.departmentName)+" ")]),a("p",[a("span",[e._v("入职时间：")]),e._v(" "+e._s(e._f("formatDate")(e.ruleForm.timeOfEntry))+" ")])])]),a("div",[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"期望离职时间：",prop:"expectedDepartureTime"}},[a("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"选择日期",disabled:e.computeOpType},model:{value:e.ruleForm.data.exceptTime,callback:function(t){e.$set(e.ruleForm.data,"exceptTime",t)},expression:"ruleForm.data.exceptTime"}})],1),a("el-form-item",{attrs:{label:"离职原因：",prop:"reasonsForLeaving"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",placeholder:"显示提交人填写的离职原因",disabled:e.computeOpType},model:{value:e.ruleForm.data.reason,callback:function(t){e.$set(e.ruleForm.data,"reason",t)},expression:"ruleForm.data.reason"}})],1)],1)],1)])},u=[],d={name:"UsersTableIndex",props:{selectedId:{type:String,default:""},tabLab:{type:String,default:""}},data:function(){return{dialogImageUrl:"",dialogVisible:!1,timeValue:"",ruleForm:{data:{exceptTime:""}}}},computed:{computeOpType:function(){return"已撤销"!==this.ruleForm.stateOfApproval}},created:function(){this.init()},methods:{init:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["e"])(e.selectedId);case 2:a=t.sent,e.ruleForm=a,e.ruleForm.data=JSON.parse(e.ruleForm.procData);case 5:case"end":return t.stop()}}),t)})))()}}},m=d,v=(a("76d3"),a("2877")),f=Object(v["a"])(m,p,u,!1,null,"77eed432",null),h=f.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"AdjustThePost"},[a("div",{staticClass:"infoBox"},[a("div",{staticClass:"info"},[a("p",[a("span",{staticClass:"name"},[e._v("姓名："+e._s(e.ruleForm.username))])]),a("p",[a("span",[e._v("部门：")]),e._v(" "+e._s(e.ruleForm.departmentName)+" ")]),a("p",[a("span",[e._v("入职时间：")]),e._v(" "+e._s(e._f("formatDate")(e.ruleForm.timeOfEntry))+" ")])])]),a("div",[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"请假类型：",prop:"holidayType"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:e.ruleForm.data.holidayType,callback:function(t){e.$set(e.ruleForm.data,"holidayType",t)},expression:"ruleForm.data.holidayType"}})],1),a("el-form-item",{attrs:{label:"开始时间：",prop:"startTime"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期",disabled:e.computeOpType},model:{value:e.ruleForm.data.start_time,callback:function(t){e.$set(e.ruleForm.data,"start_time",t)},expression:"ruleForm.data.start_time"}})],1),a("el-form-item",{attrs:{label:"结束时间：",prop:"endTime"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期",disabled:e.computeOpType},model:{value:e.ruleForm.data.end_time,callback:function(t){e.$set(e.ruleForm.data,"end_time",t)},expression:"ruleForm.data.end_time"}})],1),a("el-form-item",{attrs:{label:"请假时长：",prop:"duration"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:e.ruleForm.data.duration,callback:function(t){e.$set(e.ruleForm.data,"duration",t)},expression:"ruleForm.data.duration"}})],1),a("el-form-item",{attrs:{label:"申请原因：",prop:"cause"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",placeholder:"显示请假人填写的请假原因",disabled:e.computeOpType},model:{value:e.ruleForm.data.reason,callback:function(t){e.$set(e.ruleForm.data,"reason",t)},expression:"ruleForm.data.reason"}})],1)],1)],1)])},g=[],y={name:"UsersTableIndex",props:{selectedId:{type:String,default:""},tabLab:{type:String,default:""}},data:function(){return{dialogImageUrl:"",dialogVisible:!1,timeValue:"",ruleForm:{data:{holidayType:""}}}},computed:{computeOpType:function(){return"已撤销"!==this.ruleForm.stateOfApproval}},created:function(){this.init()},methods:{init:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a,r;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["e"])(e.selectedId);case 2:a=t.sent,e.ruleForm=a,e.ruleForm.data=JSON.parse(e.ruleForm.procData),r=e.ruleForm.data.holidayType,e.ruleForm.data.holidayType=1===r?"请假":"调休";case 7:case"end":return t.stop()}}),t)})))()}}},_=y,w=(a("1385"),Object(v["a"])(_,b,g,!1,null,"8c3e9e00",null)),x=w.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"AdjustThePost"},[a("div",{staticClass:"infoBox"},[a("div",{staticClass:"info"},[a("p",[a("span",{staticClass:"name"},[e._v("姓名："+e._s(e.ruleForm.username))])]),a("p",[a("span",[e._v("部门：")]),e._v(" "+e._s(e.ruleForm.departmentName)+" ")]),a("p",[a("span",[e._v("入职时间：")]),e._v(" "+e._s(e._f("formatDate")(e.ruleForm.timeOfEntry))+" ")])])]),a("div",[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"补偿方式",prop:"types"}},[e._v(" 调休 ")]),a("el-form-item",{attrs:{label:"加班开始时间",prop:"timeValue"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"选择日期",disabled:e.computeOpType},model:{value:e.ruleForm.data.start_time,callback:function(t){e.$set(e.ruleForm.data,"start_time",t)},expression:"ruleForm.data.start_time"}})],1),a("el-form-item",{attrs:{label:"加班结束时间",prop:"timeValue"}},[a("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期",disabled:e.computeOpType},model:{value:e.ruleForm.data.end_time,callback:function(t){e.$set(e.ruleForm.data,"end_time",t)},expression:"ruleForm.data.end_time"}})],1),a("el-form-item",{attrs:{label:"申请原因",prop:"evaluate"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",placeholder:"显示加班人填写的加班原因",disabled:e.computeOpType},model:{value:e.ruleForm.data.reason,callback:function(t){e.$set(e.ruleForm.data,"reason",t)},expression:"ruleForm.data.reason"}})],1)],1)],1)])},k=[],F={name:"Overtime",props:{selectedId:{type:String,default:""},tabLab:{type:String,default:""}},data:function(){return{id:"",dialogImageUrl:"",dialogVisible:!1,timeValue:"",ruleForm:{data:{start_time:""}},rules:{}}},computed:{computeOpType:function(){return"已撤销"!==this.ruleForm.stateOfApproval}},mounted:function(){this.init()},methods:{init:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["e"])(e.selectedId);case 2:a=t.sent,e.ruleForm=a,e.ruleForm.data=JSON.parse(e.ruleForm.procData);case 5:case"end":return t.stop()}}),t)})))()}}},S=F,j=(a("712a"),Object(v["a"])(S,O,k,!1,null,"224d6ec1",null)),T=j.exports,C=a("2f62"),I={name:"UsersTableIndex",components:{Quit:h,Leave:x,Overtime:T},data:function(){return{tagName:"copy",seeState:"becomeARegularWorker",centerDialogVisible:!1,topLabel:"转正",approvalsType:[],approvalsTypes:"",approvalsState:c.approvalState,approvalsStates:[],tableData:[],total:0,selectedId:"",pagination:{page:1,pageSize:10,process_key$equal:this.process_key$equal,process_state$in:this.process_state$in},adoptVisible:!1,formData:{handleOpinion:"",processId:"",handleType:""}}},computed:Object(l["a"])({},Object(C["d"])(["userId"])),created:function(){this.getApprovalList(),this.getFlowList()},methods:{getApprovalList:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["d"])(e.pagination);case 2:a=t.sent,e.total=a.total,e.tableData=a.rows;case 5:case"end":return t.stop()}}),t)})))()},getFlowList:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["f"])();case 2:e.approvalsType=t.sent;case 3:case"end":return t.stop()}}),t)})))()},delProcess:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(n["a"])({id:e});case 2:t.$message.success("撤销成功"),t.getApprovalList();case 4:case"end":return a.stop()}}),a)})))()},handleProcess:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["b"])(e.formData);case 2:e.$message.success("审批通过"),e.getApprovalList(),e.adoptVisible=!1;case 5:case"end":return t.stop()}}),t)})))()},rejectProcess:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(n["c"])({id:e});case 2:t.getApprovalList(),t.$message.success("已驳回该审批");case 4:case"end":return a.stop()}}),a)})))()},checkRadio:function(e){if(this.approvalsTypes===e)return this.approvalsTypes="",void this.changeSelectParams();this.approvalsTypes=e,this.changeSelectParams()},changeSelectParams:function(){this.pagination.processKey=this.approvalsTypes,this.pagination.processState=this.approvalsStates.join(","),this.getApprovalList()},handleCurrentChange:function(e){this.pagination.page=e,this.getApprovalList()},tabSwitch:function(){this.approvalsStates=[],this.pagination.processState="","launch"===this.tagName?(delete this.pagination.userId,delete this.pagination.procCurrNodeUserId,this.pagination.userId=this.userId):"approvals"===this.tagName?(delete this.pagination.userId,delete this.pagination.procCurrNodeUserId,this.pagination.procCurrNodeUserId=this.userId,this.pagination.processState="1"):"copy"===this.tagName&&(delete this.pagination.userId,delete this.pagination.procCurrNodeUserId),this.getApprovalList()},clickCancel:function(e){var t=this;this.$confirm("是否撤销该流程").then((function(){t.delProcess(e)}))},clickPass:function(e,t){this.adoptVisible=!0,this.formData.processId=t,"2"===e?this.formData.handleType="2":"3"===e?this.formData.handleType="3":"4"===e&&(this.formData.handleType="4"),this.formData.handleUserId=this.userId},clickBack:function(e){var t=this;this.$confirm("是否驳回","确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){t.rejectProcess(e)}))},clickDetail:function(e,t){switch(this.centerDialogVisible=!0,this.topLabel=t,t){case"离职":this.seeState="quit",this.selectedId=e;break;case"加班":this.seeState="overtime",this.selectedId=e;break;case"请假":this.seeState="leave",this.selectedId=e;break;case"调休":this.seeState="leave",this.selectedId=e;break}},closeDialog:function(){this.centerDialogVisible=!1,this.getApprovalList()},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()}))}}},N=I,D=(a("3be6"),Object(v["a"])(N,r,s,!1,null,"429ab85e",null));t["default"]=D.exports},a15b:function(e,t,a){"use strict";var r=a("23e7"),s=a("44ad"),o=a("fc6a"),i=a("a640"),l=[].join,n=s!=Object,c=i("join",",");r({target:"Array",proto:!0,forced:n||!c},{join:function(e){return l.call(o(this),void 0===e?",":e)}})},a5f2:function(e,t,a){}}]);