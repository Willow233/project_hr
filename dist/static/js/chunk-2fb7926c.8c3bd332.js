(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2fb7926c"],{"01f5":function(e,t,a){"use strict";t["a"]={hireType:[{id:1,value:"正式"},{id:2,value:"非正式"}],subjection:[{id:"1",value:"总部"},{id:"2",value:"分城市"}],workingState:[{id:"1",value:"在职"},{id:"2",value:"离职"}],leaveType:[{id:"1",value:"主动离职"},{id:"2",value:"被动离职"},{id:"3",value:"退休"}],attritionMonth:[{id:"1",value:"离职日本月"},{id:"2",value:"离职日次月"}],informaltype:[{id:"2",value:"实习"},{id:"3",value:"劳务"},{id:"4",value:"顾问"},{id:"5",value:"返聘"},{id:"6",value:"外包"}],highestDegree:[{id:"1",value:"初中"},{id:"2",value:"高中"},{id:"3",value:"中专"},{id:"4",value:"大专"},{id:"5",value:"本科"},{id:"6",value:"硕士"},{id:"7",value:"博士"},{id:"8",value:"其他"}],isOverseas:[{id:"1",value:"中国大陆"},{id:"2",value:"港澳台国外"}],gender:[{id:"1",value:"男"},{id:"2",value:"女"}],maritaStatus:[{id:"1",value:"未婚"},{id:"2",value:"已婚"},{id:"3",value:"离异"}],animalSymbol:[{id:"1",value:"鼠"},{id:"2",value:"牛"},{id:"3",value:"虎"},{id:"4",value:"兔"},{id:"5",value:"龙"},{id:"6",value:"蛇"},{id:"7",value:"马"},{id:"8",value:"羊"},{id:"9",value:"猴"},{id:"10",value:"鸡"},{id:"11",value:"狗"},{id:"12",value:"猪"}],constellation:[{code:1,value:"水瓶座"},{code:2,value:"双鱼座"},{code:3,value:"白羊座"},{code:4,value:"金牛座"},{code:5,value:"双子座"},{code:6,value:"巨蟹座"},{code:7,value:"狮子座"},{code:8,value:"处女座"},{code:9,value:"天秤座"},{code:10,value:"天蝎座"},{code:11,value:"射手座"},{code:12,value:"摩羯座"}],bloodType:[{id:"1",value:"A型"},{id:"2",value:"B型"},{id:"3",value:"O型"},{id:"4",value:"AB型"}],educationType:[{id:"1",value:"统招"},{id:"2",value:"自考"},{id:"3",value:"成考"}],positiveType:[{id:"1",value:"已转正"},{id:"2",value:"未转正"}],contractPeriod:[{id:"1",value:"6月"},{id:"2",value:"12月"},{id:"3",value:"24月"},{id:"4",value:"36月"},{id:"5",value:"其他"}],renewalCount:[{id:1,value:"0次"},{id:2,value:"1次"},{id:3,value:"2次"},{id:4,value:"3次"},{id:5,value:"4次或以上"}],resumeSource:[{id:"1",value:"智联招聘"},{id:"2",value:"拉勾网"},{id:"3",value:"前程无忧"},{id:"4",value:"猎聘网"},{id:"5",value:"校园宣讲"},{id:"6",value:"猎头"},{id:"7",value:"内部推荐"}],hireSourceType:[{id:"1",value:"社招"},{id:"2",value:"校招"}],departments:[{id:"1",value:"总裁办"},{id:"2",value:"研究院"}],stausInfos:[{id:"1",value:"在职"},{id:"2",value:"入职"},{id:"3",value:"离职"}]}},"0b62":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-container"},[a("div",{staticClass:"app-container"},[a("page-tools",{attrs:{"show-before":!0}},[a("span",{attrs:{slot:"before"},slot:"before"},[e._v("共计 "+e._s(e.page.total)+" 名员工")]),a("template",{slot:"after"},[a("el-button",{attrs:{size:"small",type:"success",plain:""},on:{click:function(t){return e.$router.push("/import")}}},[e._v("excel导入")]),a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:e.exportData}},[e._v("excel导出")]),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:e.addNewEmployee}},[e._v("新增员工")])],1)],2),a("el-card",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.employeesList}},[a("el-table-column",{attrs:{label:"序号",sortable:"",type:"index",width:"50px",align:"center"}}),a("el-table-column",{attrs:{label:"姓名",sortable:"",prop:"username"}}),a("el-table-column",{attrs:{label:"工号",sortable:"",prop:"workNumber"}}),a("el-table-column",{attrs:{label:"聘用形式",sortable:"",prop:"formOfEmployment",formatter:e.formatEmployment}}),a("el-table-column",{attrs:{label:"部门",sortable:"",prop:"departmentName"}}),a("el-table-column",{attrs:{label:"入职时间",sortable:"",prop:"timeOfEntry"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("formatDate")(a.timeOfEntry))+" ")]}}])}),a("el-table-column",{attrs:{label:"账户状态",sortable:"",prop:"enableState",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[1===r.enableState?a("i",{staticClass:"el-icon-success",staticStyle:{color:"green"}}):e._e(),1!==r.enableState?a("i",{staticClass:"el-icon-error",staticStyle:{color:"red"}}):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.$router.push("/employees/detail/"+r.id+"?")}}},[e._v("查看")]),a("el-button",{attrs:{type:"text",size:"small",disabled:"1063705989926227968"===r.id},on:{click:function(t){return e.editRole(r.id)}}},[e._v("角色")]),a("el-button",{attrs:{type:"text",size:"small",disabled:"1063705989926227968"===r.id},on:{click:function(t){return e.delEmployee(r.id)}}},[e._v("删除")])]}}])})],1),a("el-row",{staticStyle:{height:"60px"},attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-pagination",{attrs:{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,"current-page":e.page.page},on:{"current-change":e.handleCurrentChange}})],1)],1)],1),a("add-employee",{ref:"addEmployee",attrs:{"show-dialog":e.showDialog},on:{"update:showDialog":function(t){e.showDialog=t},"update:show-dialog":function(t){e.showDialog=t},getEmployeeList:e.getEmployeeList}}),a("assign-role",{ref:"assignRole",attrs:{"show-role-dialog":e.showRoleDialog,"user-id":e.userId},on:{"update:showRoleDialog":function(t){e.showRoleDialog=t},"update:show-role-dialog":function(t){e.showRoleDialog=t}}})],1)},n=[],l=a("c7eb"),o=a("1da1"),i=(a("7db0"),a("d3b7"),a("3ca3"),a("ddb0"),a("b64b"),a("d81d"),a("8f00")),s=a("01f5"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"新增员工",visible:e.showDialog,width:"35%",top:"8vh"},on:{close:e.btnCancel},scopedSlots:e._u([{key:"footer",fn:function(){return[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.btnOK}},[e._v("确定")]),a("el-button",{attrs:{size:"small"},on:{click:e.btnCancel}},[e._v("取消")])],1)],1)]},proxy:!0}])},[a("el-form",{ref:"employeeForm",attrs:{"label-width":"120px",model:e.employeeForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"姓名",prop:"username"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入姓名"},model:{value:e.employeeForm.username,callback:function(t){e.$set(e.employeeForm,"username",t)},expression:"employeeForm.username"}})],1),a("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入手机号"},model:{value:e.employeeForm.mobile,callback:function(t){e.$set(e.employeeForm,"mobile",t)},expression:"employeeForm.mobile"}})],1),a("el-form-item",{attrs:{label:"入职时间",prop:"timeOfEntry"}},[a("el-date-picker",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择入职时间"},model:{value:e.employeeForm.timeOfEntry,callback:function(t){e.$set(e.employeeForm,"timeOfEntry",t)},expression:"employeeForm.timeOfEntry"}})],1),a("el-form-item",{attrs:{label:"聘用形式",prop:"formOfEmployment"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择"},model:{value:e.employeeForm.formOfEmployment,callback:function(t){e.$set(e.employeeForm,"formOfEmployment",t)},expression:"employeeForm.formOfEmployment"}},e._l(e.EmployeeEnum.hireType,(function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"工号",prop:"workNumber"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入工号"},model:{value:e.employeeForm.workNumber,callback:function(t){e.$set(e.employeeForm,"workNumber",t)},expression:"employeeForm.workNumber"}})],1),a("el-form-item",{attrs:{label:"部门",prop:"departmentName"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择部门"},on:{focus:e.getDepartments},model:{value:e.employeeForm.departmentName,callback:function(t){e.$set(e.employeeForm,"departmentName",t)},expression:"employeeForm.departmentName"}}),e.showTree?a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.treeData,props:{label:"name"},"default-expand-all":!0},on:{"node-click":e.selectNode}}):e._e()],1),a("el-form-item",{attrs:{label:"转正时间",prop:"correctionTime"}},[a("el-date-picker",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择转正时间"},model:{value:e.employeeForm.correctionTime,callback:function(t){e.$set(e.employeeForm,"correctionTime",t)},expression:"employeeForm.correctionTime"}})],1)],1)],1)},c=[],d=(a("b0c0"),a("1eef")),m=a("ed08"),p={props:{showDialog:{type:Boolean,default:!1}},data:function(){return{EmployeeEnum:s["a"],employeeForm:{username:"",mobile:"",formOfEmployment:"",workNumber:"",departmentName:"",timeOfEntry:"",correctionTime:""},rules:{username:[{required:!0,message:"用户姓名不能为空",trigger:"blur"},{min:1,max:4,message:"用户姓名为1-4位"}],mobile:[{required:!0,message:"手机号不能为空",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不正确",trigger:"blur"}],formOfEmployment:[{required:!0,message:"聘用形式不能为空",trigger:"blur"}],workNumber:[{required:!0,message:"工号不能为空",trigger:"blur"}],departmentName:[{required:!0,message:"部门不能为空",trigger:"change"}],timeOfEntry:[{required:!0,message:"入职时间",trigger:"blur"}]},treeData:[],showTree:!1,loading:!1}},methods:{getDepartments:function(){var e=this;return Object(o["a"])(Object(l["a"])().mark((function t(){var a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.showTree=!0,e.loading=!0,t.next=4,Object(d["d"])();case 4:a=t.sent,e.treeData=Object(m["a"])(a.depts,""),e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()},selectNode:function(e){this.employeeForm.departmentName=e.name,this.showTree=!1},btnOK:function(){var e=this;return Object(o["a"])(Object(l["a"])().mark((function t(){return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.employeeForm.validate();case 3:return t.next=5,Object(i["a"])(e.employeeForm);case 5:e.$emit("getEmployeeList"),e.$message.success("添加用户成功"),e.btnCancel(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},btnCancel:function(){this.employeeForm={username:"",mobile:"",formOfEmployment:"",workNumber:"",departmentName:"",timeOfEntry:"",correctionTime:""},this.$refs.employeeForm.resetFields(),this.$emit("update:showDialog",!1),this.showTree=!1}}},f=p,b=a("2877"),v=Object(b["a"])(f,u,c,!1,null,null,null),h=v.exports,y=a("8975"),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"分配角色",visible:e.showRoleDialog},on:{close:e.btnCancel}},[a("el-checkbox-group",{model:{value:e.roleIds,callback:function(t){e.roleIds=t},expression:"roleIds"}},e._l(e.list,(function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1),a("el-row",{attrs:{slot:"footer",type:"flex",justify:"center"},slot:"footer"},[a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.btnOk}},[e._v("确定")]),a("el-button",{attrs:{size:"small"},on:{click:e.btnCancel}},[e._v("取消")])],1)],1)],1)},w=[],O=a("90e7"),x=a("c24f"),k={props:{showRoleDialog:{type:Boolean,default:!1},userId:{type:String,default:null}},data:function(){return{list:[],roleIds:[]}},created:function(){this.getRoleList(),this.getUserDetailById()},methods:{getRoleList:function(){var e=this;return Object(o["a"])(Object(l["a"])().mark((function t(){var a,r;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(O["f"])({page:1,pagesize:20});case 2:a=t.sent,r=a.rows,e.list=r;case 5:case"end":return t.stop()}}),t)})))()},getUserDetailById:function(e){var t=this;return Object(o["a"])(Object(l["a"])().mark((function a(){var r,n;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e){a.next=6;break}return a.next=3,Object(x["b"])(e);case 3:r=a.sent,n=r.roleIds,t.roleIds=n;case 6:case"end":return a.stop()}}),a)})))()},btnOk:function(){var e=this;return Object(o["a"])(Object(l["a"])().mark((function t(){return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(i["b"])({id:e.userId,roleIds:e.roleIds});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.log(t.t0);case 8:e.$message.success("保存用户角色信息成功"),e.btnCancel();case 10:case"end":return t.stop()}}),t,null,[[0,5]])})))()},btnCancel:function(){this.roleIds=[],this.$emit("update:showRoleDialog",!1)}}},j=k,E=Object(b["a"])(j,g,w,!1,null,null,null),_=E.exports,D={components:{AddEmployee:h,AssignRole:_},data:function(){return{page:{page:1,size:10,total:0},employeesList:[],loading:!1,showDialog:!1,showRoleDialog:!1,userId:null}},created:function(){this.getEmployeeList()},methods:{getEmployeeList:function(){var e=this;return Object(o["a"])(Object(l["a"])().mark((function t(){var a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(i["d"])(e.page);case 3:a=t.sent,e.employeesList=a.rows,e.page.total=a.total,e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()},handleCurrentChange:function(e){this.page.page=e,this.getEmployeeList(this.page)},formatEmployment:function(e){var t=s["a"].hireType.find((function(t){return t.id===e.formOfEmployment}));return t?t.value:"未知"},delEmployee:function(e){var t=this;return Object(o["a"])(Object(l["a"])().mark((function a(){return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$confirm("是否确认删除该员工","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 3:return a.next=5,Object(i["c"])(e);case 5:t.getEmployeeList(t.page),t.$message.success("删除员工成功"),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](0),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})))()},addNewEmployee:function(e){this.showDialog=!0},exportData:function(){var e=this,t={"姓名":"username","手机号":"mobile","入职时间":"timeOfEntry","聘用形式":"formOfEmployment","转正日期":"correctionTime","工号":"workNumber","部门":"departmentName"};Promise.all([a.e("chunk-71e3923d"),a.e("chunk-2d0cc0b6")]).then(a.bind(null,"4bf8")).then(function(){var a=Object(o["a"])(Object(l["a"])().mark((function a(r){var n,o,s,u,c;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(i["d"])({page:1,size:e.page.total});case 2:n=a.sent,o=n.rows,s=e.formatJson(t,o),u=[["姓名","主要信息","","","","","部门"]],c=["A1:A2","B1:F1","G1:G2"],r.export_json_to_excel({header:Object.keys(t),data:s,filename:"员工资料表",multiHeader:u,merges:c});case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},formatJson:function(e,t){return t.map((function(t){return Object.keys(e).map((function(a){if("timeOfEntry"===e[a]||"correctionTime"===e[a])return Object(y["formatDate"])(t[e[a]]);if("formOfEmployment"===e[a]){var r=s["a"].hireType.find((function(r){r.id,t[e[a]]}));return r?r.value:"未知"}return t[e[a]]}))}))},editRole:function(e){var t=this;return Object(o["a"])(Object(l["a"])().mark((function a(){return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.userId=e,a.next=3,t.$refs.assignRole.getUserDetailById(e);case 3:t.showRoleDialog=!0;case 4:case"end":return a.stop()}}),a)})))()}}},F=D,S=Object(b["a"])(F,r,n,!1,null,null,null);t["default"]=S.exports},"0ccb":function(e,t,a){var r=a("50c4"),n=a("1148"),l=a("1d80"),o=Math.ceil,i=function(e){return function(t,a,i){var s,u,c=String(l(t)),d=c.length,m=void 0===i?" ":String(i),p=r(a);return p<=d||""==m?c:(s=p-d,u=n.call(m,o(s/m.length)),u.length>s&&(u=u.slice(0,s)),e?c+u:u+c)}};e.exports={start:i(!1),end:i(!0)}},"1eef":function(e,t,a){"use strict";a.d(t,"d",(function(){return n})),a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return o})),a.d(t,"e",(function(){return i})),a.d(t,"c",(function(){return s}));var r=a("b775");function n(){return Object(r["a"])({url:"/company/department"})}function l(e){return Object(r["a"])({url:"/company/department/".concat(e),method:"delete"})}function o(e){return Object(r["a"])({url:"/company/department",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/company/department/".concat(e)})}function s(e){return Object(r["a"])({url:"/company/department/".concat(e.id),method:"put",data:e})}},"4d90":function(e,t,a){"use strict";var r=a("23e7"),n=a("0ccb").start,l=a("9a0c");r({target:"String",proto:!0,forced:l},{padStart:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},"7db0":function(e,t,a){"use strict";var r=a("23e7"),n=a("b727").find,l=a("44d2"),o=a("ae40"),i="find",s=!0,u=o(i);i in[]&&Array(1)[i]((function(){s=!1})),r({target:"Array",proto:!0,forced:s||!u},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),l(i)},"90e7":function(e,t,a){"use strict";a.d(t,"f",(function(){return n})),a.d(t,"c",(function(){return l})),a.d(t,"e",(function(){return o})),a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return u}));var r=a("b775");function n(e){return Object(r["a"])({url:"/sys/role",params:e})}function l(e){return Object(r["a"])({url:"/sys/role/".concat(e),method:"delete"})}function o(e){return Object(r["a"])({url:"/sys/role/".concat(e)})}function i(e){return Object(r["a"])({url:"/sys/role/".concat(e.id),method:"put",data:e})}function s(e){return Object(r["a"])({url:"/sys/role",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/sys/role/assignPrem",method:"put",data:e})}},"9a0c":function(e,t,a){var r=a("342f");e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},ed08:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("53ca"),a("ac1f"),a("00b4"),a("5319"),a("4d63"),a("2c3e"),a("25f0"),a("d3b7"),a("4d90"),a("159b");function r(e,t){var a=[];return e.forEach((function(n){if(n.pid===t){var l=r(e,n.id);l.length&&(n.children=l),a.push(n)}})),a}}}]);